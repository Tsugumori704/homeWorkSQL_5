-- Table: public."Departments"

-- DROP TABLE public."Departments";

CREATE TABLE public."Departments"
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    financing money NOT NULL DEFAULT 0,
    name character varying(100) COLLATE pg_catalog."default" NOT NULL,
    faculty_id integer NOT NULL,
    CONSTRAINT "Departments_pkey" PRIMARY KEY (id),
    CONSTRAINT uc_name_department UNIQUE (name)
        INCLUDE(name),
    CONSTRAINT fk_faculty_id FOREIGN KEY (faculty_id)
        REFERENCES public."Faculties" (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT ch_financing_departmens CHECK (financing > 0::money) NOT VALID,
    CONSTRAINT ch_name_department CHECK (name::text !~~ ' %'::text) NOT VALID
)
WITH (
    OIDS = FALSE
)
TABLESPACE pg_default;

ALTER TABLE public."Departments"
    OWNER to postgres;

-- Index: fki_fk_faculty_id

-- DROP INDEX public.fki_fk_faculty_id;

CREATE INDEX fki_fk_faculty_id
    ON public."Departments" USING btree
    (faculty_id)
    TABLESPACE pg_default;



-- Table: public."Faculties"

-- DROP TABLE public."Faculties";

CREATE TABLE public."Faculties"
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    name character varying(100) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT "Faculties_pkey" PRIMARY KEY (id),
    CONSTRAINT uc_name_faculties UNIQUE (name)
        INCLUDE(name),
    CONSTRAINT ch_name_faculties CHECK (name::text !~~ ' %'::text) NOT VALID
)
WITH (
    OIDS = FALSE
)
TABLESPACE pg_default;

ALTER TABLE public."Faculties"
    OWNER to postgres;



-- Table: public."Groups"

-- DROP TABLE public."Groups";

CREATE TABLE public."Groups"
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    name character varying(10) COLLATE pg_catalog."default" NOT NULL,
    year integer NOT NULL,
    department_id integer NOT NULL,
    CONSTRAINT "Groups_pkey" PRIMARY KEY (id),
    CONSTRAINT uc_name_croups UNIQUE (name)
        INCLUDE(name),
    CONSTRAINT fk_department_id FOREIGN KEY (department_id)
        REFERENCES public."Departments" (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT ch_name_groups CHECK (name::text !~~ ' %'::text) NOT VALID,
    CONSTRAINT ch_year_groups CHECK (year >= 1 AND year <= 5) NOT VALID
)
WITH (
    OIDS = FALSE
)
TABLESPACE pg_default;

ALTER TABLE public."Groups"
    OWNER to postgres;

-- Index: fki_fk_department_id

-- DROP INDEX public.fki_fk_department_id;

CREATE INDEX fki_fk_department_id
    ON public."Groups" USING btree
    (department_id)
    TABLESPACE pg_default;



-- Table: public."GroupsLectures"

-- DROP TABLE public."GroupsLectures";

CREATE TABLE public."GroupsLectures"
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    group_id integer NOT NULL,
    lecture_id integer NOT NULL,
    CONSTRAINT "GroupsLectures_pkey" PRIMARY KEY (id),
    CONSTRAINT fk_group_id FOREIGN KEY (group_id)
        REFERENCES public."Groups" (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT fk_lecture_id FOREIGN KEY (lecture_id)
        REFERENCES public."Lectures" (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)
WITH (
    OIDS = FALSE
)
TABLESPACE pg_default;

ALTER TABLE public."GroupsLectures"
    OWNER to postgres;

-- Index: fki_fk_group_id

-- DROP INDEX public.fki_fk_group_id;

CREATE INDEX fki_fk_group_id
    ON public."GroupsLectures" USING btree
    (group_id)
    TABLESPACE pg_default;

-- Index: fki_fk_lecture_id

-- DROP INDEX public.fki_fk_lecture_id;

CREATE INDEX fki_fk_lecture_id
    ON public."GroupsLectures" USING btree
    (lecture_id)
    TABLESPACE pg_default;



-- Table: public."Lectures"

-- DROP TABLE public."Lectures";

CREATE TABLE public."Lectures"
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    day_of_week integer NOT NULL,
    lecture_room character varying COLLATE pg_catalog."default" NOT NULL,
    subject_id integer NOT NULL,
    teather_id integer NOT NULL,
    CONSTRAINT "Lectures_pkey" PRIMARY KEY (id),
    CONSTRAINT fk_subject_id FOREIGN KEY (subject_id)
        REFERENCES public."Subjects" (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT fk_teather_id FOREIGN KEY (teather_id)
        REFERENCES public."Teachers" (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT ch_day_of_week CHECK (day_of_week >= 1 AND day_of_week <= 7) NOT VALID,
    CONSTRAINT ch_lecture_room CHECK (lecture_room::text !~~ ' %'::text) NOT VALID
)
WITH (
    OIDS = FALSE
)
TABLESPACE pg_default;

ALTER TABLE public."Lectures"
    OWNER to postgres;

-- Index: fki_fk_subject_id

-- DROP INDEX public.fki_fk_subject_id;

CREATE INDEX fki_fk_subject_id
    ON public."Lectures" USING btree
    (subject_id)
    TABLESPACE pg_default;

-- Index: fki_fk_teather_id

-- DROP INDEX public.fki_fk_teather_id;

CREATE INDEX fki_fk_teather_id
    ON public."Lectures" USING btree
    (teather_id)
    TABLESPACE pg_default;



-- Table: public."Subjects"

-- DROP TABLE public."Subjects";

CREATE TABLE public."Subjects"
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    name character varying COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT "Subjects_pkey" PRIMARY KEY (id),
    CONSTRAINT uc_name_subject UNIQUE (name)
        INCLUDE(name),
    CONSTRAINT ch_name_subject CHECK (name::text !~~ ' %'::text) NOT VALID
)
WITH (
    OIDS = FALSE
)
TABLESPACE pg_default;

ALTER TABLE public."Subjects"
    OWNER to postgres;



-- Table: public."Teachers"

-- DROP TABLE public."Teachers";

CREATE TABLE public."Teachers"
(
    id integer NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 2147483647 CACHE 1 ),
    name character varying COLLATE pg_catalog."default" NOT NULL,
    salary money NOT NULL,
    surname character varying COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT "Teachers_pkey" PRIMARY KEY (id),
    CONSTRAINT ch_name_teachers CHECK (name::text !~~ ' %'::text) NOT VALID,
    CONSTRAINT ch_salary_teachers CHECK (salary > 0::money) NOT VALID,
    CONSTRAINT ch_surname_teathers CHECK (surname::text !~~ ' %'::text) NOT VALID
)
WITH (
    OIDS = FALSE
)
TABLESPACE pg_default;

ALTER TABLE public."Teachers"
    OWNER to postgres;